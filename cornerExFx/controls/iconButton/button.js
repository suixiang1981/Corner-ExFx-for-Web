var __extends=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return n(e,t)};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","../../core/displayObject","../../core/util","../../core/fXEvent"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=function(s){__extends(e,s);function e(e,t,i){if(e===void 0){e=null}if(t===void 0){t=MaterialDesignHue.LightBlue}if(i===void 0){i=false}var n=s.call(this,e,t,i)||this;n.hx=0;n.hy=0;n.isDown=false;n.isOver=false;n.clickCancel=false;n.isButtonHalo=true;n._label="";n.element.tabIndex=0;n.element.className="button";n.element.onclick=function(e){if(!n._enabled)return;if(n.clickCancel){n.clickCancel=false;return}setTimeout(function(){n.click(e.x,e.y)},200)};n.element.onkeydown=function(e){if(!n._enabled)return;if(e.keyCode==13||e.keyCode==32){n.isDown=false;n.down(false,n.width/2,n.height/2);setTimeout(function(){n.clickCancel=false;n.click()},200)}};document.addEventListener("keyup",function(e){n.up()});document.addEventListener("mouseup",function(e){n.up()});n.element.addEventListener("mouseup",function(e){n.up()});n.element.onmouseover=function(){n.isOver=true;n.draw()};n.element.onmouseout=function(){n.isOver=false;n.draw()};n.element.ontouchstart=function(e){if(!n._enabled)return;n.clickCancel=true;var t=e.targetTouches.item(0);var i=o.Util.getWorldPosition(n.element);n.isDown=true;n.down(false,t.clientX-i.x,t.clientY-i.y)};n.element.ontouchend=function(e){var t=e.targetTouches.item(0);setTimeout(function(){n.clickCancel=false;n.click()},200)};n.element.ontouchcancel=function(e){n.up};n.element.onmousedown=function(e){if(!n._enabled)return;n.isDown=true;n.down(false,e.offsetX,e.offsetY)};n.element.onblur=function(){n.isDown=true;n.up()};n.element.onfocus=function(){if(n._enabled){if(!n.isDown){n.isDown=false;n.down(true)}}else{n.element.blur()}};n.element.style.backgroundImage="url("+MaterialDesignImages.getImage(MaterialDesignImageName.Halo,n._isDrak,n._hue)+")";if(e!=null){n.label=o.Util.getElementStringAttribute(e,"label","")}n.draw();return n}e.prototype.getHtmlPath=function(){return"cornerExFx/controls/button/button.html"};e.prototype.getCSSPath=function(){return"cornerExFx/controls/button/button.css"};e.prototype.click=function(e,t){if(e===void 0){e=0}if(t===void 0){t=0}var i=new n.FXMouseEvent;i.type=n.FXMouseEvent.Click;i.x=e;i.y=t;this.dispatchEvent(i)};e.prototype.down=function(e,t,i){var n=this;if(e===void 0){e=false}if(t===void 0){t=0}if(i===void 0){i=0}this.element.focus();if(this.isButtonHalo){this.hx=t;this.hy=i}else{this.hx=this.height/2;this.hy=this.height/2}var s=0;if(this.isButtonHalo){var o=Math.sqrt(this.hx*this.hx+this.hy*this.hy);var l=Math.sqrt(this.hx*this.hx+(this.height-this.hy)*(this.height-this.hy));var r=Math.sqrt((this.width-this.hx)*(this.width-this.hx)+(this.height-this.hy)*(this.height-this.hy));var a=Math.sqrt(this.hx*this.hx+(this.height-this.hy)*(this.height-this.hy));if(e){this.hx=this.width/2;this.hy=this.height/2;s=Math.min(this.width,this.height)+10}else{s=Math.max(o,l,r,a)+10}}else{s=this.height/2}this.element.style.transition="none";this.element.style.backgroundPositionX=this.hx+"px";this.element.style.backgroundPositionY=this.hy+"px";this.element.style.backgroundSize="0px 0px";this.element.style.backgroundImage="url("+MaterialDesignImages.getImage(MaterialDesignImageName.Halo,this._isDrak,this._hue)+")";setTimeout(function(){n.element.style.transition="all linear 200ms";n.element.style.backgroundPositionX=n.hx-s+"px";n.element.style.backgroundPositionY=n.hy-s+"px";n.element.style.backgroundSize=s*2+"px "+s*2+"px"},1)};e.prototype.up=function(){if(this.isDown){this.element.style.backgroundImage="url("+MaterialDesignImages.getImage(MaterialDesignImageName.Null)+")";this.element.style.backgroundRepeat="no-repeat"}this.isDown=false};Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this.element.tabIndex},set:function(e){this.element.tabIndex=e},enumerable:true,configurable:true});e.prototype.setWidth=function(e){this._width=e;this.setNumberStyle(this.element,"width",e)};e.prototype.setHeight=function(e){this._height=e;this.setNumberStyle(this.element,"height",e);this.setNumberStyle(this.buttonLabel,"lineHeight",e-6)};Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e;this.buttonLabel.textContent=this._label},enumerable:true,configurable:true});e.prototype.draw=function(){if(this._enabled){this.buttonLabel.style.color=this._isDrak?MaterialDesignColors.lightColor:MaterialDesignColors.drakColor;if(this.isOver){this.element.style.backgroundColor=MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S200:MaterialDesignShade.S600)}else{this.element.style.backgroundColor=MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S100:MaterialDesignShade.S700)}}else{this.buttonLabel.style.color=this._isDrak?MaterialDesignColors.lightDisabledColor:MaterialDesignColors.drakDisabledColor;this.element.style.backgroundColor=this._isDrak?MaterialDesignColors.lightDisabledBackgroundColor:MaterialDesignColors.drakDisabledBackgroundColor}};return e}(i.DisplayObject);t.Button=s});