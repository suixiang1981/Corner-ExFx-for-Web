var __extends=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return n(e,t)};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","./comboFieldBase","../dateChooser/dateChooser","../../core/fXEvent","../../core/util"],function(e,t,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(i){__extends(e,i);function e(e){if(e===void 0){e=false}var t=i.call(this)||this;t.isShowTimeEditor=false;t.isShowTimeEditor=e;t.popupWidth=268;if(t.isShowTimeEditor){t.popupHeight=345}else{t.popupHeight=305}t.input.oninput=function(e){t.verify()};t.input.onblur=function(e){t.setInputValue();t.verify()};t.addEventListener(o.FxDropdownEvent.Open,function(e){t.openHandler()});return t}e.prototype.verify=function(){var e=a.Util.stringToDate(this.input.value);if(e==null){this.verified=false;this.input.title="请输入合法的日期。"}else{this.verified=true;this.input.title=""}this._value=e;this.setXMLValue()};e.prototype.valueStringToValue=function(){this._value=a.Util.stringToDate(this.valueString)};e.prototype.valueToValueString=function(){this.valueString=a.Util.dateToString(this._value,a.DateFormat.Default,this.isShowTimeEditor?a.DateDataType.DateTimeHM:a.DateDataType.Date)};e.prototype.openHandler=function(){var t=this;if(this.value==null){this.value=new Date}if(this.dateChooser==null){this.dateChooser=new n.DateChooser(this.isShowTimeEditor);this.dateChooser.addEventListener(o.FXCalendarLayoutChangeEvent.Change,function(e){if(e.newDate==null){e.newDate=new Date}if(e.newDate.getFullYear()!=t.value.getFullYear()||e.newDate.getDate()!=t.value.getDate()||e.newDate.getMonth()!=t.value.getMonth()){t.popdown()}t.value=new Date(e.newDate.getFullYear(),e.newDate.getMonth(),e.newDate.getDate(),e.newDate.getHours(),e.newDate.getMinutes())})}a.Util.appendDisplayObject(this.popupPanel,this.dateChooser);this.dateChooser.selectedDate=new Date(this._value.getFullYear(),this._value.getMonth(),this._value.getDate(),this._value.getHours(),this._value.getMinutes())};return e}(i.ComboFieldBase);t.DateField=r});