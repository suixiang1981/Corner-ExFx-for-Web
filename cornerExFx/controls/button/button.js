var __extends=this&&this.__extends||function(){var s=function(e,t){s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return s(e,t)};return function(e,t){s(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","../../core/displayObject","../../core/util","../../core/fXEvent","../../materialDesign/materialDesignsEmphasis"],function(e,t,i,l,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(o){__extends(e,o);function e(e,t,i){if(e===void 0){e=null}if(t===void 0){t=MaterialDesignHue.LightBlue}if(i===void 0){i=false}var s=o.call(this,e,t,i)||this;s.hx=0;s.hy=0;s.isDown=false;s.isOver=false;s.clickCancel=false;s.isButtonHalo=true;s._label="";s._emphasis=a.MaterialDesignEmphasis.High;s.element.tabIndex=0;s.element.className="button";s.element.onclick=function(e){if(!s._enabled)return;if(s.clickCancel){s.clickCancel=false;return}setTimeout(function(){s.click(e.x,e.y)},200)};s.element.onkeydown=function(e){if(!s._enabled)return;if(e.keyCode==13||e.keyCode==32){s.isDown=false;s.down(false,s.width/2,s.height/2);setTimeout(function(){s.clickCancel=false;s.click()},200)}};document.addEventListener("keyup",function(e){s.up()});document.addEventListener("mouseup",function(e){s.up()});s.element.addEventListener("mouseup",function(e){s.up()});s.element.onmouseover=function(){s.isOver=true;s.draw()};s.element.onmouseout=function(){s.isOver=false;s.draw()};s.element.ontouchstart=function(e){if(!s._enabled)return;s.clickCancel=true;var t=e.targetTouches.item(0);var i=l.Util.getWorldPosition(s.element);s.isDown=true;s.down(false,t.clientX-i.x,t.clientY-i.y)};s.element.ontouchend=function(e){var t=e.targetTouches.item(0);setTimeout(function(){s.clickCancel=false;s.click()},200)};s.element.ontouchcancel=function(e){s.up};s.element.onmousedown=function(e){if(!s._enabled)return;s.isDown=true;s.down(false,e.offsetX,e.offsetY)};s.element.onblur=function(){s.isDown=true;s.up()};s.element.onfocus=function(){if(s._enabled){if(!s.isDown){s.isDown=false;s.down(true)}}else{s.element.blur()}};s.element.style.backgroundImage="url("+MaterialDesignImages.getImage(MaterialDesignImageName.Halo,s._isDrak,s._hue)+")";if(e!=null){s.label=l.Util.getElementStringAttribute(e,"label","");var n=l.Util.getElementStringAttribute(e,"emphasis",null);if(n!=null){if(n in a.MaterialDesignEmphasis)s.emphasis=a.MaterialDesignEmphasis[n]}}s.draw();return s}e.prototype.getHtmlPath=function(){return"cornerExFx/controls/button/button.html"};e.prototype.getCSSPath=function(){return"cornerExFx/controls/button/button.css"};e.prototype.click=function(e,t){if(e===void 0){e=0}if(t===void 0){t=0}var i=new s.FXMouseEvent;i.type=s.FXMouseEvent.Click;i.x=e;i.y=t;this.dispatchEvent(i)};e.prototype.down=function(e,t,i){var s=this;if(e===void 0){e=false}if(t===void 0){t=0}if(i===void 0){i=0}this.element.focus();if(this.isButtonHalo){this.hx=t;this.hy=i}else{this.hx=this.height/2;this.hy=this.height/2}var n=0;if(this.isButtonHalo){var o=Math.sqrt(this.hx*this.hx+this.hy*this.hy);var l=Math.sqrt(this.hx*this.hx+(this.height-this.hy)*(this.height-this.hy));var a=Math.sqrt((this.width-this.hx)*(this.width-this.hx)+(this.height-this.hy)*(this.height-this.hy));var r=Math.sqrt(this.hx*this.hx+(this.height-this.hy)*(this.height-this.hy));if(e){this.hx=this.width/2;this.hy=this.height/2;n=Math.min(this.width,this.height)+10}else{n=Math.max(o,l,a,r)+10}}else{n=this.height/2}this.element.style.transition="none";this.element.style.backgroundPositionX=this.hx+"px";this.element.style.backgroundPositionY=this.hy+"px";this.element.style.backgroundSize="0px 0px";this.element.style.backgroundImage="url("+MaterialDesignImages.getImage(MaterialDesignImageName.Halo,this._isDrak,this._hue)+")";setTimeout(function(){s.element.style.transition="all linear 200ms";s.element.style.backgroundPositionX=s.hx-n+"px";s.element.style.backgroundPositionY=s.hy-n+"px";s.element.style.backgroundSize=n*2+"px "+n*2+"px"},1)};e.prototype.up=function(){if(this.isDown){this.element.style.backgroundImage="url("+MaterialDesignImages.getImage(MaterialDesignImageName.Null)+")";this.element.style.backgroundRepeat="no-repeat"}this.isDown=false};Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this.element.tabIndex},set:function(e){this.element.tabIndex=e},enumerable:true,configurable:true});e.prototype.setWidth=function(e){this._width=e;this.setNumberStyle(this.element,"width",e)};e.prototype.setHeight=function(e){this._height=e;this.setNumberStyle(this.element,"height",e);this.setNumberStyle(this.buttonLabel,"lineHeight",e-6)};Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e;this.buttonLabel.textContent=this._label},enumerable:true,configurable:true});e.prototype.draw=function(){if(this._enabled){if(this._emphasis==a.MaterialDesignEmphasis.High){this.buttonLabel.style.color=this._isDrak?MaterialDesignColors.lightColor:MaterialDesignColors.drakColor;if(this.isOver){this.element.style.backgroundColor=MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S200:MaterialDesignShade.S600)}else{this.element.style.backgroundColor=MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S100:MaterialDesignShade.S700)}}else{this.buttonLabel.style.color=MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S100:MaterialDesignShade.S800);if(this.isOver){this.element.style.backgroundColor=MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S800:MaterialDesignShade.S100)}else{this.element.style.backgroundColor=MaterialDesignColors.transparentColor}}if(this._emphasis==a.MaterialDesignEmphasis.Medium){this.element.style.border="1px solid "+MaterialDesignColors.getColor(this._hue,this._isDrak?MaterialDesignShade.S300:MaterialDesignShade.S600)}else{this.element.style.border="none"}}else{this.buttonLabel.style.color=this._isDrak?MaterialDesignColors.lightDisabledColor:MaterialDesignColors.drakDisabledColor;this.element.style.backgroundColor=this._isDrak?MaterialDesignColors.lightDisabledBackgroundColor:MaterialDesignColors.drakDisabledBackgroundColor}};Object.defineProperty(e.prototype,"emphasis",{get:function(){return this._emphasis},set:function(e){this._emphasis=e;this.draw()},enumerable:true,configurable:true});return e}(i.DisplayObject);t.Button=n});