var __extends=this&&this.__extends||function(){var i=function(t,n){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)if(n.hasOwnProperty(e))t[e]=n[e]};return i(t,n)};return function(t,n){i(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}}();define(["require","exports","../core/eventDispatcher","./httpMethod"],function(t,n,e,s){"use strict";Object.defineProperty(n,"__esModule",{value:true});var i=function(o){__extends(f,o);function f(t,n){if(t===void 0){t=null}if(n===void 0){n=null}var e=o.call(this)||this;var i;if(n==null||n==""||n==undefined||isNaN(t)||t==undefined||t==null){i=document.URL.replace("http://","").split(":")}if(n==null||n==""||n==undefined){n=i[0]}if(isNaN(t)||t==undefined||t==null){if(i.length>1){t=Number(i[1].split("/")[0])}else{t=80}}e._port=t;e._host=n;return e}Object.defineProperty(f.prototype,"port",{get:function(){return this._port},enumerable:true,configurable:true});f.prototype.post=function(t,n,e,i,o,l){if(e===void 0){e=null}if(i===void 0){i=null}if(o===void 0){o=null}if(l===void 0){l=null}if(f.postFunction!=null){t=f.postFunction(t,n)}this.send(t,n,e,i,o,l)};f.prototype.get=function(t,n,e,i,o,l){if(e===void 0){e=null}if(i===void 0){i=null}if(o===void 0){o=null}if(l===void 0){l=null}if(f.getFunction!=null){t=f.getFunction(t,n)}this.send(t,n,e,i,o,l,s.HttpMethod.GET)};f.prototype.send=function(t,n,e,i,o,l,u){if(e===void 0){e=null}if(i===void 0){i=null}if(o===void 0){o=null}if(l===void 0){l=null}if(u===void 0){u=s.HttpMethod.POST}var r=new XMLHttpRequest;r.onloadstart=function(){if(o!=null){o()}};r.onload=function(){if(r.readyState==4){if(r.status>=200&&r.status<300||r.status==0||r.status==304){var t=r.response;if(f.callbackFunction!=null){t=f.callbackFunction(t)}if(t!=null){if(e!=null){e(t)}}}else{if(l!=null){l()}}}else{if(l!=null){l()}}};if(u==s.HttpMethod.POST){r.upload.onprogress=function(t){if(i!=null){i(t.loaded,t.total)}}}else if(u==s.HttpMethod.GET){r.onprogress=function(t){if(i!=null){i(t.loaded,t.total)}}}r.open(u,"http://"+this._host+":"+this._port,true);r.setRequestHeader("Content-Type",n);r.send(t)};return f}(e.EventDispatcher);n.HttpClient=i});