var __extends=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)if(t.hasOwnProperty(o))e[o]=t[o]};return n(e,t)};return function(e,t){n(e,t);function o(){this.constructor=e}e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}}();define(["require","exports","../../core/displayObjectContainer","../../core/util","../../core/fXEvent","../../core/arrayCollection","../../controls/listBox/listBase"],function(e,t,o,s,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=function(t){__extends(o,t);function o(){var e=t.call(this)||this;e.oldHeight=null;e._items=new n.ArrayCollection;e.dataFields=["id"];e.loadHtml();e._allItems=e._items;e.setItems(e._allItems);return e}o.prototype.setSelectedItem=function(){if(this._selectedItem!=null){if(this._selectedItem.panel.children.length>0){this._selectedItem.panel.style.height=this.element.clientHeight-40*this.items.count+"px"}else{this._selectedItem.panel.style.height="0px"}}};o.prototype.loadHtml=function(){var e=this;if(!o.isCSSLoaded){o.isCSSLoaded=true;Loader.loadCSS("cornerExFx/containers/outlookBar/skins/"+s.Util.skin+"/outlookBar.css")}this.element.className="outlookBarPanel";this.itemsPanel=this.element;setInterval(function(){if(e.oldHeight!=e.element.clientHeight){e.oldHeight=e.element.clientHeight;e.setSelectedItem()}},20)};Object.defineProperty(o.prototype,"items",{get:function(){return this._items},enumerable:true,configurable:true});Object.defineProperty(o.prototype,"selectedItem",{get:function(){return this._selectedItem},set:function(e){if(this._items.contains(e)){if(this._selectedItem!=e){var t=new r.FXListEvent;t.newItem=e;t.target=this;t.type=r.FXListEvent.Change;t.oldItem=this._selectedItem;this._selectedItem=e;if(t.newItem!=null)t.newItem.isSelected=true;if(t.oldItem!=null)t.oldItem.isSelected=false;this.dispatchEvent(t);this.setSelectedItem()}}else{this._selectedItem=null}},enumerable:true,configurable:true});Object.defineProperty(o.prototype,"xmlDataProvider",{set:function(e){this._xmlDataProviderElement=e;this.setItemsXmlDataProvider(this._xmlDataProviderElement,this.items)},enumerable:true,configurable:true});o.prototype.createListItem=function(e){var t=e.icon;var o=e.label;if(this.iconFunction!=null){t=this.iconFunction(e)}if(this.labelFunction!=null){o=this.labelFunction(e)}return new u(o,t,e.data)};o.isCSSLoaded=true;return o}(i.ListBase);t.OutlookBar=l;var u=function(i){__extends(l,i);function l(e,t,o){if(t===void 0){t=null}if(o===void 0){o=[]}var n=i.call(this)||this;n._data=[];n._icon="";n._label="";n._isSelected=false;if(!l.isCSSLoaded){l.isCSSLoaded=true;Loader.loadCSS("cornerExFx/containers/outlookBar/skins/"+s.Util.skin+"/outlookBarItem.css")}n.element.innerHTML=Loader.loadTXT("cornerExFx/containers/outlookBar/skins/outlookBarItem.html",true);n._element.style.position="static";n.element.style.userSelect="none";n.element.style.msUserSelect="none";n.element.style.webkitUserSelect="none";n.outlookButton=s.Util.getElementByClass("outlookButton",n.element);n.outlookButtonIcon=s.Util.getElementByClass("outlookButtonIcon",n.element);n.outlookButtonLabel=s.Util.getElementByClass("outlookButtonLabel",n.element);n._panel=s.Util.getElementByClass("outlookButtonItemPanel",n.element);n.outlookButton.onpointerdown=function(e){var t=new r.FXMouseEvent;t.x=e.x;t.y=e.y;t.button=e.button;t.target=n;t.type=r.FXMouseEvent.MouseDown;n.dispatchEvent(t)};n.label=e;n.icon=t;n.data=o;n.isSelected=false;return n}Object.defineProperty(l.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:true,configurable:true});Object.defineProperty(l.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e;if(this._icon==""||this._icon==null){this.outlookButtonIcon.src="cornerExFx/containers/outlookBar/skins/"+s.Util.skin+"/null.png"}else{this.outlookButtonIcon.src=this._icon}},enumerable:true,configurable:true});Object.defineProperty(l.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e;this.outlookButtonLabel.textContent=this._label},enumerable:true,configurable:true});Object.defineProperty(l.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e;if(this._isSelected){this.outlookButton.className="outlookSelectedButton"}else{this._panel.style.height="0px";this.outlookButton.className="outlookButton"}},enumerable:true,configurable:true});l.isCSSLoaded=false;return l}(o.DisplayObjectContainer);t.OutlookBarItem=u});