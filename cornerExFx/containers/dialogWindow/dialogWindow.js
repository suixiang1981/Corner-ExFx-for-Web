var __extends=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return n(e,t)};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","../../core/fXEvent","../../controls/handle/handle","../../core/displayObjectContainer","../../core/util"],function(e,t,s,a,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(o){__extends(l,o);function l(e,t,i){if(e===void 0){e=null}if(t===void 0){t=MaterialDesignHue.LightBlue}if(i===void 0){i=false}var n=o.call(this,e,t,i)||this;n.handle=new a.Handle;n.left0=0;n.top0=0;n._showCloseButton=true;n._moveEnabled=true;n._label="";if(!l.isCSSLoaded){l.isCSSLoaded=true;Loader.loadCSS("cornerExFx/containers/dialogWindow/skins/"+r.Util.skin+"/dialogWindow.css")}n.element.innerHTML=Loader.loadTXT("cornerExFx/containers/dialogWindow/skins/dialogWindow.html",true);n.element.onpointerdown=function(){r.Util.htmlElementToTop(n.element)};n._panel=r.Util.getElementByClass("windowPanel",n.element);n.closeButton=r.Util.getElementByClass("windowClose",n.element);n.showCloseButton=n._showCloseButton;n.labelDiv=r.Util.getElementByClass("windowLabel",n.element);n.handle.left=0;n.handle.top=0;n.handle.element.style.height="40px";n.handle.element.style.right="40px";r.Util.appendDisplayObject(n.element,n.handle);n.handle.addEventListener(a.FXMoveEvent.MoveStart,function(e){if(n._moveEnabled){r.Util.htmlElementToTop(n.element);n.left0=n.left;n.top0=n.top}});n.handle.addEventListener(a.FXMoveEvent.Move,function(e){if(n._moveEnabled){n.setLeft(n.left0+e.x);n.setTop(n.top0+e.y)}});n.closeButton.onclick=function(){var e=new s.FXEvent;e.target=n;e.type=s.FXWindowEvent.Closing;n.dispatchEvent(e);if(!e.cancel){n.visible=false;var t=new s.FXEvent;t.target=n;t.type=s.FXWindowEvent.Close;n.dispatchEvent(t)}};n.label=n._label;return n}Object.defineProperty(l.prototype,"moveEnabled",{get:function(){return this._moveEnabled},set:function(e){this._moveEnabled=e},enumerable:true,configurable:true});Object.defineProperty(l.prototype,"showCloseButton",{get:function(){return this._showCloseButton},set:function(e){this._showCloseButton=e;if(this.closeButton!=null){this.closeButton.style.visibility=this._showCloseButton?"visible":"hidden";this.closeButton.style.display=this._showCloseButton?"inline":"none"}},enumerable:true,configurable:true});Object.defineProperty(l.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e;if(this.labelDiv!=null){this.labelDiv.textContent=this.label}},enumerable:true,configurable:true});l.prototype.setLeft=function(e){if(e<0){e=0}var t=this.getParentWidth();if(e+this.width>t){e=t-this.width}this.left=e};l.prototype.setTop=function(e){if(e<0){e=0}var t=this.getParentHeight();if(e+this.height>t){e=t-this.height}this.top=e};l.prototype.toCenter=function(){this.left=(this.getParentWidth()-this.width)/2;this.top=(this.getParentHeight()-this.height)/2};l.prototype.showDialog=function(e){var t=this;if(e===void 0){e=true}if(this.backDiv==null){this.backDiv=document.createElement("div");this.backDiv.style.position="absolute";this.backDiv.style.width="100%";this.backDiv.style.height="100%";this.backDiv.style.backgroundColor="rgba(0,0,0,.6)";this.backDiv.style.transition="opacity linear 200ms"}this.backDiv.style.opacity="0";r.Util.appendElement(document.body,this.backDiv);r.Util.htmlElementToTop(this.backDiv);setTimeout(function(){t.backDiv.style.opacity="1";t.show(e,t.backDiv)},1)};l.prototype.show=function(e,t){var i=this;if(e===void 0){e=true}if(t===void 0){t=document.body}if(e)this.toCenter();setTimeout(function(){if(i.element.parentElement!=null){i.element.parentElement.removeChild(i.element)}r.Util.appendElement(t,i.element);r.Util.htmlElementToTop(i.element);i.element.focus();i.visible=true},1)};l.prototype.hide=function(){this.visible=false};Object.defineProperty(l.prototype,"visible",{set:function(e){var t=this;this.element.blur();this._visible=e;if(this._visible){this.element.style.visibility="visible";this.element.style.display="inline"}else{this.element.style.visibility="hidden";this.element.style.display="none";if(this.backDiv!=null){setTimeout(function(){t.backDiv.style.opacity="0";setTimeout(function(){r.Util.removeElement(document.body,t.backDiv)},500)},1)}}},enumerable:true,configurable:true});l.isCSSLoaded=false;return l}(i.DisplayObjectContainer);t.DialogWindow=n});