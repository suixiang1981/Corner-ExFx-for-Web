var __extends=this&&this.__extends||function(){var n=function(t,e){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)if(e.hasOwnProperty(o))t[o]=e[o]};return n(t,e)};return function(t,e){n(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}();define(["require","exports","../../core/displayObject","../../controls/handle/handle","../../core/util","../../core/displayObjectContainer"],function(t,e,o,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var l=function(e){__extends(t,e);function t(t){if(t===void 0){t=null}var r=e.call(this)||this;r.handle=new n.Handle;r.x=0;r.y=0;r._zoom=1;if(t==null){r.rootPanel=new a}else{r.rootPanel=t}r.handle.percentWidth=100;r.handle.percentHeight=100;i.Util.appendDisplayObject(r.element,r.handle);i.Util.appendDisplayObject(r.element,r.rootPanel);r.percentWidth=100;r.percentHeight=100;setTimeout(function(){var t=r.element.clientWidth;var e=r.element.clientHeight;r.rootPanel.left=t/2;r.rootPanel.top=e/2},1);r.element.onmousewheel=function(t){var e=i.Util.getWorldPosition(r.element);var o=t.x-e.x;var n=t.y-e.y;if(t.wheelDelta!=0){r.setZoom(t.wheelDelta/40,o,n)}else if(t.detail!=0){r.setZoom(t.detail,o,n)}};r.handle.addEventListener(n.FXMoveEvent.MoveStart,function(t){r.x=r.rootPanel.left;r.y=r.rootPanel.top});r.handle.addEventListener(n.FXMoveEvent.Move,function(t){r.rootPanel.left=r.x+t.x;r.rootPanel.top=r.y+t.y});r.handle.addEventListener(n.FXMoveEvent.MoveEnd,function(t){r.x=r.rootPanel.left;r.y=r.rootPanel.top});return r}t.prototype.setZoom=function(t,e,o){var n=this._zoom;this._zoom=this._zoom*(1+t/30);this.rootPanel.setZoom(this._zoom);var r=e-this.rootPanel.left;var i=o-this.rootPanel.top;var l=this._zoom/n-1;this.rootPanel.left=this.rootPanel.left-r*l;this.rootPanel.top=this.rootPanel.top-i*l};return t}(o.DisplayObject);e.Roamer=l;var a=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t._zoom=-1;t.x0Arr=[];t.y0Arr=[];t.element.style.width="0px";t.element.style.height="0px";return t}t.prototype.setZoom=function(t){if(this._zoom==-1){for(var e=0;e<this.children.length;e++){var o=this.children[e];this.x0Arr.push(o.left);this.y0Arr.push(o.top)}}this._zoom=t;for(var e=0;e<this.children.length;e++){var o=this.children[e];o.left=this.x0Arr[e]*this._zoom;o.top=this.y0Arr[e]*this._zoom;if("setZoom"in o){o["setZoom"](t)}}};return t}(r.DisplayObjectContainer);e.RoamerPanel=a});