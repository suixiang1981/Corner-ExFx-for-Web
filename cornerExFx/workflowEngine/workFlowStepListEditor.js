var __extends=this&&this.__extends||function(){var e=function(t,o){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)if(o.hasOwnProperty(i))t[i]=o[i]};return e(t,o)};return function(t,o){e(t,o);function i(){this.constructor=t}t.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}}();define(["require","exports","../containers/titleWindow/titleWindow","../mvvm/listDataEditor/listDataEditor","../core/util","../core/fXEvent","./workFlowUserListEditor","./workFlowNextListEditor"],function(t,o,i,l,s,a,n,d){"use strict";Object.defineProperty(o,"__esModule",{value:true});var e=function(r){__extends(t,r);function t(){var o=r.call(this)||this;o.listDataEditor=new l.ListDataEditor("workFlowEngine.stepList");o.listDataEditor.percentHeight=100;o.listDataEditor.percentWidth=100;o.addChild(o.listDataEditor);var i=document.createElement("div");i.innerHTML=Loader.loadTXT("cornerExFx/workflowEngine/skins/workFlowButtonUsers.html",true);i.className="toolButtonDisabled";i.title="用户管理";var t=s.Util.getElementById("listDataEditorEdit",o.listDataEditor.toolBarDiv);s.Util.insertElement(i,t);var e=document.createElement("div");e.innerHTML=Loader.loadTXT("cornerExFx/workflowEngine/skins/workFlowButtonNexts.html",true);e.className="toolButtonDisabled";e.title="下一步";s.Util.insertElement(e,t);s.Util.appendDisplayObject(o.element,o.listDataEditor);o.listDataEditor.control.addEventListener(a.FXListEvent.Change,function(t){if(t.newItem==null){i.className="toolButtonDisabled";e.className="toolButtonDisabled"}else{i.className="toolButton";e.className="toolButton"}});i.onclick=function(){if(o.listDataEditor.control.selectedItem!=null){var t=o.listDataEditor.control.getIdByItem(o.listDataEditor.control.selectedItem);if(o.workFlowUserListEditor==null){o.workFlowUserListEditor=new n.WorkFlowUserListEditor;o.workFlowUserListEditor.width=900;o.workFlowUserListEditor.height=500;o.workFlowUserListEditor.visible=false;s.Util.appendDisplayObject(document.body,o.workFlowUserListEditor)}o.workFlowUserListEditor.label="用户管理 - "+o.listDataEditor.control.selectedItem.label;o.workFlowUserListEditor.showDialog();o.workFlowUserListEditor.load(t)}};e.onclick=function(){if(o.listDataEditor.control.selectedItem!=null){var t=o.listDataEditor.control.getIdByItem(o.listDataEditor.control.selectedItem);if(o.workFlowNextListEditor==null){o.workFlowNextListEditor=new d.WorkFlowNextListEditor;o.workFlowNextListEditor.width=900;o.workFlowNextListEditor.height=500;o.workFlowNextListEditor.visible=false;s.Util.appendDisplayObject(document.body,o.workFlowNextListEditor)}o.workFlowNextListEditor.label="下一步骤 - "+o.listDataEditor.control.selectedItem.label;o.workFlowNextListEditor.showDialog();o.workFlowNextListEditor.load(t,o.workFlowId)}};return o}t.prototype.load=function(t){this.workFlowId=t;this.listDataEditor.load("workFlowId='"+t.toString()+"'");this.listDataEditor.additionalData.clear();this.listDataEditor.additionalData.add("workFlowId",t.toString())};return t}(i.TitleWindow);o.WorkFlowStepListEditor=e});