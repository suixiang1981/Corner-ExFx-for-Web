var __extends=this&&this.__extends||function(){var i=function(t,o){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)if(o.hasOwnProperty(e))t[e]=o[e]};return i(t,o)};return function(t,o){i(t,o);function e(){this.constructor=t}t.prototype=o===null?Object.create(o):(e.prototype=o.prototype,new e)}}();define(["require","exports","../containers/titleWindow/titleWindow","../mvvm/listDataEditor/listDataEditor","../core/util","../core/fXEvent","./workFlowUserEditor"],function(t,o,e,l,n,a,s){"use strict";Object.defineProperty(o,"__esModule",{value:true});var i=function(r){__extends(t,r);function t(){var o=r.call(this)||this;o.listDataEditor=new l.ListDataEditor("workFlowEngine.stepList");o.listDataEditor.percentHeight=100;o.listDataEditor.percentWidth=100;o.addChild(o.listDataEditor);var e=document.createElement("div");e.innerHTML=Loader.loadTXT("cornerExFx/workflowEngine/skins/"+n.Util.skin+"/workFlowButtonUsers.html",true);e.className="toolButtonDisabled";e.title="用户管理";var t=n.Util.getElementById("listDataEditorEdit",o.listDataEditor.toolBarDiv);n.Util.insertElement(e,t);var i=document.createElement("div");i.innerHTML=Loader.loadTXT("cornerExFx/workflowEngine/skins/"+n.Util.skin+"/workFlowButtonNexts.html",true);i.className="toolButtonDisabled";i.title="下一步";n.Util.insertElement(i,t);n.Util.appendDisplayObject(o.element,o.listDataEditor);o.listDataEditor.control.addEventListener(a.FXListEvent.Change,function(t){if(t.newItem==null){e.className="toolButtonDisabled";i.className="toolButtonDisabled"}else{e.className="toolButton";i.className="toolButton"}});e.onclick=function(){if(o.listDataEditor.control.selectedItem!=null){var t=o.listDataEditor.control.getIdByItem(o.listDataEditor.control.selectedItem);if(o.workFlowUserEditor==null){o.workFlowUserEditor=new s.WorkFlowUserEditor;o.workFlowUserEditor.width=900;o.workFlowUserEditor.height=500;o.workFlowUserEditor.visible=false;n.Util.appendDisplayObject(document.body,o.workFlowUserEditor)}o.workFlowUserEditor.label="用户管理 - "+o.listDataEditor.control.selectedItem.label;o.workFlowUserEditor.showDialog();o.workFlowUserEditor.load(t)}};return o}t.prototype.load=function(t){this.listDataEditor.load("workFlowId="+t.toString());this.listDataEditor.additionalData.clear();this.listDataEditor.additionalData.add("workFlowId",t.toString())};return t}(e.TitleWindow);o.WorkFlowStepEditor=i});